<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Profile - AgriBundance</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="../assets/css/style.css">
  <link rel="stylesheet" href="../assets/css/dashboard.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="logo">
        <img src="../assets/images/WhatsApp Image 2025-02-21 at 23.37.06_62330f14.jpg" alt="Logo" style="height: 30px; margin-right: 10px;"> AgriBundance
      </div>
      <nav>
        <ul class="nav-links">
          <li><a href="dashboard.html">Dashboard</a></li>
          <li><a href="members.html" class="active">My Profile</a></li>
          <li id="notificationDropdown" style="position: relative;">
            <a href="#" id="notificationToggle">
              <i class="fas fa-bell"></i>
              <span id="notificationBadge" style="position: absolute; top: -5px; right: -5px; background-color: red; color: white; border-radius: 50%; width: 15px; height: 15px; font-size: 10px; display: flex; align-items: center; justify-content: center;">0</span>
            </a>
            <div id="notificationContainer" style="position: absolute; top: 100%; right: -10px; width: 300px; background-color: white; border-radius: var(--border-radius); box-shadow: var(--shadow); z-index: 100; display: none;">
              <div style="padding: 15px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0; font-size: 1rem;">Notifications</h3>
                <button id="markAllRead" style="background: none; border: none; color: var(--primary-color); cursor: pointer; font-size: 0.8rem;">Mark all as read</button>
              </div>
              <div id="notificationList" style="max-height: 300px; overflow-y: auto;">
                <!-- Notifications will be populated here -->
                <div style="padding: 15px; text-align: center; color: var(--text-light);">
                  No new notifications
                </div>
              </div>
              <div style="padding: 10px; text-align: center; border-top: 1px solid var(--border-color);">
                <a href="#" style="color: var(--primary-color); font-size: 0.9rem;">View all notifications</a>
              </div>
            </div>
          </li>
          <li>
            <div class="user-dropdown" style="position: relative;">
              <a href="#" id="userDropdownToggle" style="display: flex; align-items: center;">
                <div id="userInitials" style="width: 30px; height: 30px; border-radius: 50%; background-color: rgba(255, 255, 255, 0.2); display: flex; align-items: center; justify-content: center; margin-right: 5px;">JD</div>
                <span id="userName">John Doe</span>
                <i class="fas fa-chevron-down" style="margin-left: 5px; font-size: 0.8rem;"></i>
              </a>
              <div id="userDropdownMenu" style="position: absolute; top: 100%; right: 0; width: 200px; background-color: white; border-radius: var(--border-radius); box-shadow: var(--shadow); z-index: 100; display: none;">
                <a href="members.html" style="display: block; padding: 10px 15px; color: var(--text-color); border-bottom: 1px solid var(--border-color);">
                  <i class="fas fa-user" style="margin-right: 10px;"></i> My Profile
                </a>
                <a href="#" style="display: block; padding: 10px 15px; color: var(--text-color); border-bottom: 1px solid var(--border-color);">
                  <i class="fas fa-cog" style="margin-right: 10px;"></i> Settings
                </a>
                <a href="#" id="logoutBtn" style="display: block; padding: 10px 15px; color: var(--danger-color);">
                  <i class="fas fa-sign-out-alt" style="margin-right: 10px;"></i> Logout
                </a>
              </div>
            </div>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Main Dashboard -->
  <div class="dashboard-container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-header">
        <div id="sidebarUserInitials" style="width: 60px; height: 60px; border-radius: 50%; background-color: var(--primary-color); color: white; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; margin: 0 auto 10px;">JD</div>
        <h3 id="sidebarUserName">John Doe</h3>
        <p id="membershipId" style="color: var(--text-light); font-size: 0.8rem;">Member ID: #12345</p>
      </div>
      <div class="sidebar-menu">
        <div class="sidebar-menu-item">
          <a href="dashboard.html">
            <i class="fas fa-tachometer-alt"></i> Dashboard
          </a>
        </div>
        <div class="sidebar-menu-item">
          <a href="savings.html">
            <i class="fas fa-piggy-bank"></i> Savings
          </a>
        </div>
        <div class="sidebar-menu-item">
          <a href="loans.html">
            <i class="fas fa-hand-holding-usd"></i> Loans
          </a>
        </div>
        <div class="sidebar-menu-item">
          <a href="finance.html">
            <i class="fas fa-money-bill-wave"></i> Financial
          </a>
        </div>
        <div class="sidebar-menu-item">
          <a href="marketplace.html">
            <i class="fas fa-store"></i> Marketplace
          </a>
        </div>
        <div class="sidebar-menu-item">
          <a href="resources.html">
            <i class="fas fa-tractor"></i> Resources
          </a>
        </div>
        <div class="sidebar-menu-item">
          <a href="forum.html">
            <i class="fas fa-users"></i> Forum
          </a>
        </div>
        <div class="sidebar-menu-item">
          <a href="consultations.html">
            <i class="fas fa-user-md"></i> Consultations
          </a>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="dashboard-header">
        <div>
          <h1 class="dashboard-title">My Profile</h1>
          <p style="color: var(--text-light);">View and manage your profile information</p>
        </div>
        <div class="dashboard-actions">
          <button class="btn" id="editProfileBtn">
            <i class="fas fa-edit"></i> Edit Profile
          </button>
        </div>
      </div>

      <!-- Profile Tabs -->
      <div class="card" style="padding: 0;">
        <div style="display: flex; border-bottom: 1px solid var(--border-color);">
          <div class="profile-tab active" data-tab="personalInfo">Personal Information</div>
          <div class="profile-tab" data-tab="farmInfo">Farm Information</div>
          <div class="profile-tab" data-tab="financialInfo">Financial Information</div>
        </div>
        
        <!-- Personal Information Tab -->
        <div id="personalInfo" class="tab-content" style="padding: 20px;">
          <div style="display: flex; gap: 20px; margin-bottom: 30px;">
            <div style="flex: 0 0 150px;">
              <div style="width: 150px; height: 150px; border-radius: 50%; background-color: #f0f0f0; display: flex; align-items: center; justify-content: center; font-size: 3rem; color: var(--primary-color);">
                <div id="profileInitials">JD</div>
              </div>
            </div>
            <div style="flex: 1;">
              <h2 id="memberName">John Doe</h2>
              <p style="display: flex; align-items: center; margin-bottom: 5px;">
                <i class="fas fa-envelope" style="width: 20px; margin-right: 10px; color: var(--text-light);"></i>
                <span id="memberEmail">john.doe@example.com</span>
              </p>
              <p style="display: flex; align-items: center; margin-bottom: 5px;">
                <i class="fas fa-phone" style="width: 20px; margin-right: 10px; color: var(--text-light);"></i>
                <span id="memberPhone">+254 123 456 789</span>
              </p>
              <p style="display: flex; align-items: center; margin-bottom: 5px;">
                <i class="fas fa-id-card" style="width: 20px; margin-right: 10px; color: var(--text-light);"></i>
                <span id="memberNationalId">ID12345678</span>
              </p>
              <p style="display: flex; align-items: center; margin-bottom: 5px;">
                <i class="fas fa-map-marker-alt" style="width: 20px; margin-right: 10px; color: var(--text-light);"></i>
                <span id="memberAddress">123 Farming Road, Nairobi</span>
              </p>
              <p style="display: flex; align-items: center; margin-bottom: 5px;">
                <i class="fas fa-calendar-alt" style="width: 20px; margin-right: 10px; color: var(--text-light);"></i>
                Member since <span id="membershipDate">January 15, 2023</span>
              </p>
              <div style="margin-top: 15px;">
                <button class="btn btn-outline btn-small" id="changePasswordBtn">
                  <i class="fas fa-key"></i> Change Password
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Farm Information Tab -->
        <div id="farmInfo" class="tab-content" style="padding: 20px; display: none;">
          <div class="card" style="margin-bottom: 20px;">
            <div class="card-header">
              <h3 class="card-title">Farm Details</h3>
            </div>
            <div style="display: flex; gap: 20px; margin-bottom: 20px;">
              <div style="flex: 1;">
                <p><strong>Farm Size:</strong> <span id="farmSize">5 acres</span></p>
                <p><strong>Farm Location:</strong> <span id="farmLocation">Nakuru County</span></p>
              </div>
              <div style="flex: 1;">
                <p><strong>Main Crops:</strong></p>
                <ul id="mainCrops">
                  <li>Maize</li>
                  <li>Beans</li>
                  <li>Potatoes</li>
                </ul>
              </div>
              <div style="flex: 1;">
                <p><strong>Main Livestock:</strong></p>
                <ul id="mainLivestock">
                  <li>Dairy Cows</li>
                  <li>Chickens</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Farm Activity</h3>
            </div>
            <div>
              <p>Your farm activity and statistics will be displayed here in future updates.</p>
            </div>
          </div>
        </div>
        
        <!-- Financial Information Tab -->
        <div id="financialInfo" class="tab-content" style="padding: 20px; display: none;">
          <div class="card" style="margin-bottom: 20px;">
            <div class="card-header">
              <h3 class="card-title">Financial Summary</h3>
            </div>
            <div style="display: flex; gap: 20px;">
              <div style="flex: 1; text-align: center; padding: 15px; border-right: 1px solid var(--border-color);">
                <div style="font-size: 0.9rem; color: var(--text-light); margin-bottom: 5px;">Share Capital</div>
                <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary-color);" id="shareCapital">KES 25,000</div>
              </div>
              <div style="flex: 1; text-align: center; padding: 15px; border-right: 1px solid var(--border-color);">
                <div style="font-size: 0.9rem; color: var(--text-light); margin-bottom: 5px;">Total Savings</div>
                <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary-color);" id="totalSavings">KES 45,750</div>
              </div>
              <div style="flex: 1; text-align: center; padding: 15px;">
                <div style="font-size: 0.9rem; color: var(--text-light); margin-bottom: 5px;">Active Loans</div>
                <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary-color);" id="activeLoans">KES 30,000</div>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <h3 class="card-title">Share Capital History</h3>
              <button class="btn btn-small" id="addShareCapitalBtn">
                <i class="fas fa-plus"></i> Add Share Capital
              </button>
            </div>
            <div>
              <table class="table">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Amount</th>
                    <th>Payment Method</th>
                    <th>Reference</th>
                  </tr>
                </thead>
                <tbody id="shareCapitalHistory">
                  <tr>
                    <td>January 15, 2023</td>
                    <td>KES 10,000</td>
                    <td>Bank Transfer</td>
                    <td>INV-12345</td>
                  </tr>
                  <tr>
                    <td>April 10, 2023</td>
                    <td>KES 5,000</td>
                    <td>Mobile Money</td>
                    <td>MM-67890</td>
                  </tr>
                  <tr>
                    <td>July 22, 2023</td>
                    <td>KES 10,000</td>
                    <td>Cash</td>
                    <td>CSH-54321</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading overlay -->
  <div id="loadingOverlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); display: none; align-items: center; justify-content: center; z-index: 2000;">
    <div class="loading-spinner" style="width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite;"></div>
  </div>

  <!-- Toast notifications -->
  <div id="toast" style="position: fixed; bottom: 20px; right: 20px; padding: 12px 20px; border-radius: 4px; color: white; z-index: 1000; transition: opacity 0.3s ease; opacity: 0; max-width: 300px;"></div>

  <style>
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .profile-tab {
      padding: 15px 20px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    
    .profile-tab:hover {
      background-color: #f8f9fa;
    }
    
    .profile-tab.active {
      color: var(--primary-color);
      border-bottom: 2px solid var(--primary-color);
    }
  </style>

  <script src="../assets/js/main.js"></script>
  <script src="../assets/js/members.js"></script>
  <script>
    // Function to show loading overlay
    function showLoading() {
      document.getElementById('loadingOverlay').style.display = 'flex';
    }

    // Function to hide loading overlay
    function hideLoading() {
      document.getElementById('loadingOverlay').style.display = 'none';
    }

    // Function to show toast notification
    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      
      // Set toast type
      if (type === 'success') {
        toast.style.backgroundColor = 'var(--success-color)';
      } else if (type === 'error') {
        toast.style.backgroundColor = 'var(--danger-color)';
      } else if (type === 'warning') {
        toast.style.backgroundColor = 'var(--warning-color)';
      } else {
        toast.style.backgroundColor = 'var(--info-color)';
      }
      
      // Set message and show toast
      toast.textContent = message;
      toast.style.opacity = '1';
      
      // Hide toast after 3 seconds
      setTimeout(() => {
        toast.style.opacity = '0';
      }, 3000);
    }

    // Initialize tabs
    document.addEventListener('DOMContentLoaded', function() {
      const tabs = document.querySelectorAll('.profile-tab');
      const tabContents = document.querySelectorAll('.tab-content');
      
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          // Remove active class from all tabs
          tabs.forEach(t => t.classList.remove('active'));
          
          // Add active class to clicked tab
          tab.classList.add('active');
          
          // Hide all tab contents
          tabContents.forEach(content => content.style.display = 'none');
          
          // Show selected tab content
          const tabId = tab.getAttribute('data-tab');
          document.getElementById(tabId).style.display = 'block';
        });
      });
      
      // User dropdown
      const userDropdownToggle = document.getElementById('userDropdownToggle');
      const userDropdownMenu = document.getElementById('userDropdownMenu');
      
      userDropdownToggle.addEventListener('click', function(e) {
        e.preventDefault();
        userDropdownMenu.style.display = userDropdownMenu.style.display === 'block' ? 'none' : 'block';
      });
      
      document.addEventListener('click', function(e) {
        if (!userDropdownToggle.contains(e.target) && !userDropdownMenu.contains(e.target)) {
          userDropdownMenu.style.display = 'none';
        }
      });
      
      // Edit profile button
      document.getElementById('editProfileBtn').addEventListener('click', function() {
        // Edit profile functionality will be handled by members.js
        if (typeof showEditProfileModal === 'function') {
          showEditProfileModal();
        } else {
          showToast('Edit profile functionality is coming soon', 'info');
        }
      });
      
      // Change password button
      document.getElementById('changePasswordBtn').addEventListener('click', function() {
        // Change password functionality will be handled by members.js
        if (typeof showChangePasswordModal === 'function') {
          showChangePasswordModal();
        } else {
          showToast('Change password functionality is coming soon', 'info');
        }
      });
      
      // Add share capital button
      document.getElementById('addShareCapitalBtn').addEventListener('click', function() {
        // Add share capital functionality will be handled by members.js
        if (typeof showAddShareCapitalModal === 'function') {
          showAddShareCapitalModal();
        } else {
          showToast('Add share capital functionality is coming soon', 'info');
        }
      });
      
      // Logout button
      document.getElementById('logoutBtn').addEventListener('click', function() {
        localStorage.removeItem('authToken');
        localStorage.removeItem('memberData');
        window.location.href = 'login.html';
      });
    });
  </script>
</body>
</html>